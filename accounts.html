<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MACX Account Details</title>
  <link rel="stylesheet" href="style.css">
  <script defer src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
</head>
<body>
  <div class="container">
    <h1>Account Details</h1>
    <p id="loginStatus">Login Status: Checking...</p>
    <div id="accountInfo"></div>
  </div>

  <script>
    const username = localStorage.getItem("macx_loggedInUser");
    const gun = Gun();
    const infoBox = document.getElementById("accountInfo");
    const loginStatus = document.getElementById("loginStatus");

    if (username) {
      gun.get('users').get(username).once(data => {
        if (data) {
          const email = data.email || "Not available";
          const password = data.password || "Not available";

          infoBox.innerHTML = `
            <p><strong>Username:</strong> ${username}</p>
            <p><strong>Email:</strong> ${email}</p>
            <p><strong>Password:</strong> ${password}</p>
            <button onclick="location.href='index.html'">Recover Deleted Account</button>
            <button onclick="location.href='supportout.html'">Support</button>
          `;
          loginStatus.textContent = "Login Status: Logged In";
        } else {
          infoBox.innerHTML = "<p>Error fetching account data.</p>";
          loginStatus.textContent = "Login Status: Logged In";
        }
      });
    } else {
      infoBox.innerHTML = `
        <p>You are not logged in.</p>
        <button onclick="location.href='index.html'">Login First</button>
        <button onclick="location.href='supportout.html'">Support</button>
      `;
      loginStatus.textContent = "Login Status: Not Logged In";
    }
  </script>
</body>
</html>
