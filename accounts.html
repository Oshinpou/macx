<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MACX Account Details</title>
  <link rel="stylesheet" href="style.css">
  <script defer src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
</head>
<body>
  <div class="container">
    <h1>Account Details</h1>
    <p id="loginStatus">Login Status: Checking...</p>
    <div id="accountInfo"></div>
  </div>

  <script>
    const gun = Gun();
    const accountInfo = document.getElementById("accountInfo");
    const loginStatus = document.getElementById("loginStatus");

    const username = localStorage.getItem("macx_loggedInUser");

    if (username) {
      gun.get("users").get(username).once(userData => {
        if (userData && userData.email && userData.password) {
          accountInfo.innerHTML = `
            <p><strong>Username:</strong> ${username}</p>
            <p><strong>Email:</strong> ${userData.email}</p>
            <p><strong>Password:</strong> ${userData.password}</p>
            <button onclick="location.href='index.html'">Recover Deleted Account</button>
            <button onclick="location.href='supportout.html'">Support</button>
          `;
          loginStatus.textContent = "Login Status: Logged In";
        } else {
          accountInfo.innerHTML = "<p>Error: Account data incomplete or missing.</p>";
          loginStatus.textContent = "Login Status: Logged In (No data found)";
        }
      });
    } else {
      accountInfo.innerHTML = `
        <p>You are not logged in.</p>
        <button onclick="location.href='index.html'">Login First</button>
        <button onclick="location.href='supportout.html'">Support</button>
      `;
      loginStatus.textContent = "Login Status: Not Logged In";
    }
  </script>
</body>
</html>
